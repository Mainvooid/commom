<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>common: commom</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">common
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">commom </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>common library only include header files.</p>
<p>It has only been tested on Windows.</p>
<hr/>
<h2>Tree</h2>
<div class="fragment"><div class="line">│  code.snippet     <span class="comment">//文件代码模板(vs-&gt;工具-&gt;代码片段管理中导入)</span></div><div class="line">│  <a class="code" href="namespacecommon.html">common</a>.hpp       <span class="comment">//主头文件(使用时include本文件)</span></div><div class="line">│  common_all.hpp   <span class="comment">//统一的主头文件(暂未生成)</span></div><div class="line">├─common            <span class="comment">//分头文件目录</span></div><div class="line">│  │  cmdline.hpp      <span class="comment">//命令行解析</span></div><div class="line">│  │  codecvt.hpp      <span class="comment">//字符编码转换</span></div><div class="line">│  │  cuda.hpp         <span class="comment">//cuda辅助(包含与opencv和directx的互操作)</span></div><div class="line">│  │  debuglog.hpp     <span class="comment">//windows调试日志</span></div><div class="line">│  │  opencl.hpp       <span class="comment">//opencl辅助</span></div><div class="line">│  │  opencv.hpp       <span class="comment">//opencv辅助</span></div><div class="line">│  │  precomm.hpp      <span class="comment">//公共辅助</span></div><div class="line">│  │  windows.hpp      <span class="comment">//windows辅助(包含directx辅助)</span></div><div class="line">│  └─cuda           <span class="comment">//cuda设备函数目录</span></div><div class="line">│     │  texture_reference.cu    </div><div class="line">│     └─ texture_reference.cuh</div><div class="line">├─docs             <span class="comment">//文档目录</span></div><div class="line">├─samples          <span class="comment">//使用样例目录</span></div><div class="line">│  └─data             <span class="comment">//测试数据 </span></div><div class="line">└─tests            <span class="comment">//单元测试目录</span></div></div><!-- fragment --><hr/>
<h2>Macro</h2>
<p>默认关闭库/宏支持</p><ul>
<li><code>HAVE_OPENCL</code> //基于OpenCL 1.2</li>
<li><code>HAVE_OPENCV</code> //基于OpenCV 4.0 with contrib</li>
<li><code>HAVE_DIRECTX</code> //基于Microsoft DirectX SDK (June 2010)</li>
<li><code>HAVE_CUDA</code> //基于CUDA 10.0</li>
<li><code>HAVE_CUDA_DEVICE</code> // 本项目cuda目录下的.cu文件添加到工程后可以开启本宏,宏详细说明见common/cuda/README.md</li>
</ul>
<hr/>
<h2>Code style and code specification</h2>
<p><b>同一文件内应统一风格.</b></p>
<h3>命名</h3>
<p>缩进应使用4空格而非制表符,语句后不应尾随空格.</p>
<p>简化匈牙利命名法: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">前缀  </th><th class="markdownTableHeadNone">类型   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">g_  </td><td class="markdownTableBodyNone">全局变量   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">m_  </td><td class="markdownTableBodyNone">类成员变量   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">s_  </td><td class="markdownTableBodyNone">静态变量   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">c_  </td><td class="markdownTableBodyNone">常量   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">p_  </td><td class="markdownTableBodyNone">指针变量   </td></tr>
</table>
<p>所有前缀或后缀应该写在一起用一个下划线隔开: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">前后缀  </th><th class="markdownTableHeadNone">类型   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">mp_  </td><td class="markdownTableBodyNone">成员指针变量   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">mcp_  </td><td class="markdownTableBodyNone">成员常量指针   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">mpc_  </td><td class="markdownTableBodyNone">成员指针常量   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">_t  </td><td class="markdownTableBodyNone">结构体类型   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">_fn  </td><td class="markdownTableBodyNone">函数指针类型   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">_e  </td><td class="markdownTableBodyNone">枚举类型   </td></tr>
</table>
<p>函数内临时的同名变量可以加个前缀<code>_</code>代表临时. 变量/文件命名全小写+下划线</p>
<p>若驼峰式命名法 类名用大驼峰,变量第一个词是动词则小驼峰addOption().</p>
<h3>文件</h3>
<p>源文件内的头文件包含顺序应从最特殊到一般，如： </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;通用头文件&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;源文件同名头文件&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;本模块其他头文件&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;自定义工具头文件&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;第三方头文件&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;平台相关头文件&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;C++库头文件&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;C库头文件&quot;</span></div></div><!-- fragment --><p>模块应使用命名空间<code>namespace{}</code>包含.</p>
<h4>HPP文件要注意的问题</h4>
<p>所有HPP文件使用宏避免重复包含. </p><div class="fragment"><div class="line"><span class="preprocessor">#ifndef _COMMON_PRECOMM_HPP_</span></div><div class="line"><span class="preprocessor">#define _COMMON_PRECOMM_HPP_</span></div><div class="line"><span class="preprocessor">#endif</span></div></div><!-- fragment --><p>HPP文件中可以使用using引用依赖,不应该使用using namespace污染命名空间.</p>
<p>不可包含全局对象或函数(容易导致符号重定义) 不可使用静态成员变量(可以通过获取局域静态变量)</p>
<p>函数的重定义问题:</p><ul>
<li>将全局函数封装为类的静态方法</li>
<li>通过冗余的模板参数变成模板函数 <div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keywordtype">bool</span> flag=false&gt;</div></div><!-- fragment --></li>
<li>static修饰</li>
</ul>
<h3>Doxygen文档</h3>
<ul>
<li><code>Doxygen</code>风格注释 <div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">*@file      文件说明</span></div><div class="line"><span class="comment">*@brief     摘要</span></div><div class="line"><span class="comment">*@author    作者信息</span></div><div class="line"><span class="comment">*@param     参数说明</span></div><div class="line"><span class="comment">*@return    返回值情况</span></div><div class="line"><span class="comment">*@retval    返回值类型 [eg:@retval NULL 空字符串][@retval !NULL 非空字符串]</span></div><div class="line"><span class="comment">*@note      注解</span></div><div class="line"><span class="comment">*@attention 注意</span></div><div class="line"><span class="comment">*@warning   警告</span></div><div class="line"><span class="comment">*@exception 可能产生的异常描述</span></div><div class="line"><span class="comment">*@enum      引用了某个枚举,Doxygen会在引用处生成链接</span></div><div class="line"><span class="comment">*@var       引用了某个变量</span></div><div class="line"><span class="comment">*@class     引用某个类 [eg: @class CTest &quot;inc/class.h&quot;]</span></div><div class="line"><span class="comment">*@see       本函数参考其它的相关的函数,生成链接</span></div><div class="line"><span class="comment">*@todo      todo注解</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">文档注释 /// 或 /** */</span></div><div class="line">*/</div></div><!-- fragment --></li>
</ul>
<h3>函数</h3>
<p>应尽可能多的使用模板函数</p>
<p>构造函数只进行没有实际意义的初始化,通过Init(),Setup()等函数进行具体构造. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
